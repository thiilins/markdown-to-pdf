# Regras de Desenvolvimento - MD to PDF Pro

## ğŸ—ï¸ Arquitetura e Estrutura de Pastas

### Estrutura de Ferramentas (Tools)

Cada ferramenta em `src/app/(tools)/[tool-name]` deve seguir esta estrutura modular:

```
[tool-name]/
â”œâ”€â”€ page.tsx                    # PÃ¡gina SSR (apenas metadata + dynamic import)
â”œâ”€â”€ _components/
â”‚   â”œâ”€â”€ constants.ts           # Constantes, exemplos, configuraÃ§Ãµes
â”‚   â”œâ”€â”€ [tool]-utils.ts        # LÃ³gica de negÃ³cio (parsing, conversÃ£o, validaÃ§Ã£o)
â”‚   â”œâ”€â”€ input/                 # Componentes de entrada
â”‚   â”‚   â”œâ”€â”€ index.tsx         # Orquestrador principal
â”‚   â”‚   â”œâ”€â”€ [type]-tab.tsx    # Tabs especÃ­ficas (csv, json, upload, etc)
â”‚   â”‚   â””â”€â”€ [feature].tsx     # Features especÃ­ficas (drag-drop, file-picker)
â”‚   â”œâ”€â”€ output/                # Componentes de saÃ­da
â”‚   â”‚   â”œâ”€â”€ index.tsx         # Orquestrador principal
â”‚   â”‚   â”œâ”€â”€ preview.tsx       # Preview visual
â”‚   â”‚   â”œâ”€â”€ markdown.tsx      # CÃ³digo fonte
â”‚   â”‚   â””â”€â”€ analytics.tsx     # EstatÃ­sticas/anÃ¡lises
â”‚   â”œâ”€â”€ options/               # Componentes de configuraÃ§Ã£o
â”‚   â”‚   â”œâ”€â”€ index.tsx         # Menu principal (desktop/mobile)
â”‚   â”‚   â”œâ”€â”€ format.tsx        # OpÃ§Ãµes de formato
â”‚   â”‚   â”œâ”€â”€ align.tsx         # Alinhamento
â”‚   â”‚   â””â”€â”€ transform.tsx     # TransformaÃ§Ãµes
â”‚   â””â”€â”€ view/                  # Views de layout
â”‚       â”œâ”€â”€ desktop.tsx       # Layout desktop (ToolShell)
â”‚       â””â”€â”€ mobile.tsx        # Layout mobile customizado
```

### PrincÃ­pios de OrganizaÃ§Ã£o

1. **SeparaÃ§Ã£o por DomÃ­nio**: Cada pasta representa uma responsabilidade clara (input, output, options, view)
2. **Index como Orquestrador**: Arquivos `index.tsx` compÃµem e exportam sub-componentes
3. **Componentes AtÃ´micos**: Cada feature/tab Ã© um arquivo separado e focado
4. **Utils Isolados**: LÃ³gica de negÃ³cio em arquivos `*-utils.ts` separados
5. **Views Separadas**: Desktop e Mobile em arquivos distintos quando necessÃ¡rio

## ğŸ“ ConvenÃ§Ãµes de CÃ³digo

### Nomenclatura

- **Componentes**: PascalCase (`ExcelInput`, `MarkdownPreview`)
- **Arquivos de Componentes**: kebab-case (`csv-tab.tsx`, `format-options.tsx`)
- **Utils**: kebab-case com sufixo `-utils` (`excel-utils.ts`, `markdown-utils.ts`)
- **Constantes**: kebab-case (`constants.ts`, `default-values.ts`)
- **Tipos**: PascalCase com sufixo quando apropriado (`ConversionResult`, `ColumnStats`)

### Estrutura de Componentes

```typescript
'use client' // Quando necessÃ¡rio

// 1. Imports externos (libs)
import { useState } from 'react'
import { Button } from '@/components/ui/button'

// 2. Imports internos (utils, types)
import type { ConversionOptions } from '../[tool]-utils'
import { parseData } from '../[tool]-utils'

// 3. Imports de componentes locais
import { SubComponent } from './sub-component'

// 4. Tipos/Interfaces
interface ComponentProps {
  value: string
  onChange: (value: string) => void
}

// 5. Componente
export function Component({ value, onChange }: ComponentProps) {
  // Estados
  const [state, setState] = useState()

  // Callbacks
  const handleAction = useCallback(() => {
    // lÃ³gica
  }, [dependencies])

  // Effects
  useEffect(() => {
    // side effects
  }, [dependencies])

  // Render
  return (
    <div>
      {/* JSX */}
    </div>
  )
}
```

## ğŸ¨ PadrÃµes de UI

### Uso do ToolShell

- **Desktop**: Sempre use `ToolShell` para layout responsivo automÃ¡tico
- **Mobile**: Use `ToolShell` com `mobileTabs` OU crie layout customizado quando necessÃ¡rio
- **OpÃ§Ãµes no Mobile**: Use `Sheet` (drawer) ou terceira tab, nunca esconda funcionalidades

### Tabs e NavegaÃ§Ã£o

- **Input**: MÃºltiplas tabs para diferentes tipos de entrada (CSV, JSON, Upload)
- **Output**: Tabs para diferentes visualizaÃ§Ãµes (Preview, Markdown, Analytics)
- **Options**: Collapsible sections ou tabs para organizar configuraÃ§Ãµes

### Drag & Drop

- Sempre em tab/Ã¡rea dedicada, nÃ£o como overlay global
- ValidaÃ§Ãµes claras (tipo de arquivo, quantidade)
- Feedback visual robusto (overlay animado, estados)

## ğŸ”§ Boas PrÃ¡ticas

### Performance

- Use `useCallback` para funÃ§Ãµes passadas como props
- Use `useMemo` para cÃ¡lculos pesados
- Lazy load de componentes pesados quando apropriado
- Debounce em inputs que disparam conversÃµes (500ms padrÃ£o)

### State Management

- Estado local com `useState` para UI
- Lift state apenas quando necessÃ¡rio
- Evite prop drilling excessivo (mÃ¡x 2-3 nÃ­veis)

### ValidaÃ§Ã£o

- Sempre valide inputs antes de processar
- Use `toast` para feedback de erros/sucesso
- ValidaÃ§Ãµes em `*-utils.ts`, nÃ£o em componentes

### Acessibilidade

- Use componentes shadcn/ui que jÃ¡ tÃªm acessibilidade
- Labels claros em todos os inputs
- Feedback visual E textual para aÃ§Ãµes

## ğŸ¯ ComponentizaÃ§Ã£o

### Quando Criar um Novo Componente

- âœ… Componente reutilizado 2+ vezes
- âœ… LÃ³gica complexa que pode ser isolada
- âœ… Responsabilidade clara e Ãºnica
- âœ… Facilita testes

### Quando NÃƒO Criar um Novo Componente

- âŒ Usado apenas uma vez e simples
- âŒ Apenas para reduzir linhas (sem ganho de clareza)
- âŒ AbstraÃ§Ã£o prematura

## ğŸ“¦ Gerenciamento de DependÃªncias

- **Package Manager**: SEMPRE use `pnpm` (nunca npm/yarn)
- **InstalaÃ§Ã£o**: `pnpm add [package]`
- **Dev Dependencies**: `pnpm add -D [package]`

## ğŸŒ InternacionalizaÃ§Ã£o

- **Idioma PadrÃ£o**: PortuguÃªs Brasil
- **UI**: Todos os textos em portuguÃªs
- **CÃ³digo**: VariÃ¡veis e funÃ§Ãµes em inglÃªs
- **ComentÃ¡rios**: PortuguÃªs quando necessÃ¡rio

## ğŸš« Anti-PadrÃµes (Evitar)

1. **Arquivos Gigantes**: MÃ¡ximo ~300 linhas por componente
2. **LÃ³gica em Componentes**: Mova para `*-utils.ts`
3. **Inline Styles**: Use Tailwind CSS
4. **Props Drilling**: MÃ¡ximo 2-3 nÃ­veis
5. **Estado Global DesnecessÃ¡rio**: Prefira estado local
6. **Imports Relativos Profundos**: Use aliases `@/`
7. **Componentes MonolÃ­ticos**: Quebre em sub-componentes
8. **DuplicaÃ§Ã£o de CÃ³digo**: Extraia para utils ou componentes

## ğŸ“š Bibliotecas Principais

### UI Components

- **shadcn/ui**: Componentes base (Button, Input, Card, etc)
- **Tailwind CSS**: EstilizaÃ§Ã£o
- **Framer Motion**: AnimaÃ§Ãµes
- **Lucide React**: Ãcones

### Funcionalidades

- **Monaco Editor**: Editor de cÃ³digo
- **React Markdown**: RenderizaÃ§Ã£o de Markdown
- **Prettier**: FormataÃ§Ã£o de cÃ³digo
- **Mermaid**: Diagramas
- **Sonner**: Toasts/NotificaÃ§Ãµes

## ğŸ”„ Fluxo de Desenvolvimento

1. **Planejamento**: Defina estrutura de pastas antes de codificar
2. **ComponentizaÃ§Ã£o**: Crie componentes atÃ´micos primeiro
3. **ComposiÃ§Ã£o**: Monte componentes maiores a partir dos atÃ´micos
4. **IntegraÃ§Ã£o**: Conecte com `*-utils.ts` e state management
5. **Refinamento**: Ajuste responsividade e acessibilidade
6. **DocumentaÃ§Ã£o**: Atualize CHANGELOG.md

## ğŸ“ Commits e Versionamento

### Formato de Commit

```
<tipo>(<escopo>): <descriÃ§Ã£o curta>

<descriÃ§Ã£o detalhada opcional>
```

**Tipos:**

- `feat`: Nova funcionalidade
- `fix`: CorreÃ§Ã£o de bug
- `refactor`: RefatoraÃ§Ã£o sem mudanÃ§a de funcionalidade
- `style`: MudanÃ§as de estilo/formataÃ§Ã£o
- `docs`: DocumentaÃ§Ã£o
- `perf`: Melhorias de performance
- `test`: Testes

**Exemplos:**

```
feat(xls-md): adicionar aba de upload com drag & drop
fix(excel-output): corrigir estatÃ­sticas nÃ£o aparecendo no mobile
refactor(xls-md): reorganizar estrutura em pastas modulares
```

## ğŸ¨ Design System

### Cores e Temas

- Suporte a dark/light mode via `next-themes`
- Use variÃ¡veis CSS do tema (`bg-background`, `text-foreground`)
- Gradientes: `bg-linear-to-r` (nÃ£o `bg-gradient-to-r`)

### EspaÃ§amento

- Use escala Tailwind (4px base): `p-4`, `gap-2`, `mb-6`
- ConsistÃªncia: mesmos espaÃ§amentos em componentes similares

### Tipografia

- TÃ­tulos: `text-xl font-bold` ou `text-2xl font-bold`
- Corpo: `text-sm` ou `text-base`
- Muted: `text-muted-foreground text-xs`

## ğŸ§ª Qualidade de CÃ³digo

### Linting

- Execute linter antes de commit
- Corrija todos os erros (nÃ£o apenas warnings)
- Use `pnpm lint` para verificar

### TypeScript

- Sempre use tipos explÃ­citos em interfaces pÃºblicas
- Evite `any` (use `unknown` se necessÃ¡rio)
- Prefira `interface` para props de componentes
- Use `type` para unions e utilitÃ¡rios

## ğŸš€ Performance e OtimizaÃ§Ã£o

### Bundle Size

- Lazy load de componentes pesados
- Dynamic imports para ferramentas individuais
- Tree-shaking: importe apenas o necessÃ¡rio

### Rendering

- Evite re-renders desnecessÃ¡rios
- Use `React.memo` para componentes puros e pesados
- Otimize listas com `key` apropriada

## ğŸ“± Responsividade

### Breakpoints Tailwind

- `sm`: 640px
- `md`: 768px
- `lg`: 1024px (Desktop)
- `xl`: 1280px
- `2xl`: 1536px

### EstratÃ©gia Mobile-First

- Design para mobile primeiro
- Progressive enhancement para desktop
- Teste em mÃºltiplos tamanhos de tela

## ğŸ¯ Checklist para Nova Ferramenta

- [ ] Estrutura de pastas seguindo padrÃ£o modular
- [ ] `page.tsx` com metadata e dynamic import
- [ ] `constants.ts` com exemplos e configuraÃ§Ãµes
- [ ] `*-utils.ts` com lÃ³gica de negÃ³cio e tipos
- [ ] Componentes `input/`, `output/`, `options/` organizados
- [ ] Views `desktop.tsx` e `mobile.tsx` (se necessÃ¡rio)
- [ ] Responsividade testada (mobile e desktop)
- [ ] Acessibilidade verificada
- [ ] ValidaÃ§Ãµes implementadas
- [ ] Feedback visual (toasts, loading states)
- [ ] DocumentaÃ§Ã£o no cÃ³digo quando necessÃ¡rio
- [ ] CHANGELOG.md atualizado
- [ ] VersÃ£o incrementada em `package.json`
- [ ] Testes manuais completos
- [ ] Commit com mensagem descritiva

---

**Lembre-se**: CÃ³digo limpo, modular e bem organizado Ã© mais importante que cÃ³digo "inteligente". Priorize legibilidade e manutenibilidade.
